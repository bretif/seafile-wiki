== Enable https on Seahub ==

Note: Seafile has two web components, Seahub and Http-server. Seahub is to serve normal web pages and Http-server is to serve only raw file uploading/downloading. You need set both parts to use https. 


Here we use self-signed SSL digital certificate for free. If you use a paid ssl certificate from some authority, just skip the first step.

* Generate SSL digital certificate with OpenSSL
<pre>
    openssl genrsa -out privkey.pem 2048
    openssl req -new -x509 -key privkey.pem -out cacert.pem -days 1095
</pre>

* Enable SSL module of Nginx (optional)
If your Nginx does not support SSL, you need to recompile it, the commands are as follows:
<pre>
    ./configure --with-http_stub_status_module --with-http_ssl_module
    make && make install
</pre>

* Modify Nginx configuration file

Assume you have configured nginx as [[Deploy-Seafile-Web-with-nginx-apache]]. To use https, you need to modify your nginx configuration file.
<pre>
    server
    {
    listen 443;
    ssl on;
    ssl_certificate /etc/ssl/cacert.pem;	# path to your cacert.pem
    ssl_certificate_key /etc/ssl/privkey.pem;	# path to your privkey.pem
    server_name www.yourdoamin.com;    
    ......
    ......
    fastcgi_param   HTTPS   on;
    }
</pre>
* Reload Nginx
<pre>
    nginx -s reload
</pre>

* Test Https

Open your browser, and input https://www.yourdomain.com, if you see a security alert dialog, that means Https is enabled.

== Enable https on seafile httpserver ==

'''Note:''' This is available in seafile server 1.4 and later.

There are two ways of enabling https on seafile httpserver. You can either:

* Use the https support provided by httpserver itself
* Or you can deploy httpserver behind nginx/apache, and use https support provided by nginx/apache

The second method is recommended, since the https support provided by httpserver has some subtle bugs, and may be removed in a future relase.

=== Enable https on httpserver with Nginx/Apache ===

This is the recommended way.

* follow the instructions on [https://github.com/haiwen/seafile/wiki/Deploy-Seafile-Web-with-nginx-apache#deploy-httpserver-behind-nginxapache Deploy httpserver behind nginx/apache].
* since you have setup nginx/apache to use https when you setup https support for Seahub, there's nothing more to do.

=== Enable https on httpserver with https support provided itself ===

'''Note''': This method should be considered deprecated.

The configuration of seafile httpserver is in the file <code>seafile-data/seafile.conf</code>. To use the native https support of seafile httpserver, add the following lines to <code>seafile.conf</code>:
<pre>
[httpserver]
port=8082
https=true
pemfile=/path/to/pemfile
privkey=/path/to/privkey
</pre>

8082 is the recommended port, but you can use any port number that is available.

After modified <code>seafile.conf</code>, you need to restart seafile by <code>./seafile.sh restart</code>.
Then open your browser and input <code>https://www.yourdomain.com:8082</code>(assume port is 8082), you should see a blank page without any errors.

'''Note:''' If your key file is encrypted, you need to decrypt first.

== Modify settings to use https ==

=== ccnet conf ===

Since you change from http to https, you need to modify the value of "SERVICE_URL" in <code>ccnet/ccnet.conf</code>:
<pre>
SERVICE_URL = https://www.yourdoamin.com
</pre>